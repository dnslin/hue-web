{
  "schemes": [
    "http",
    "https"
  ],
  "swagger": "2.0",
  "info": {
    "description": "这是 LskyPro-Go 的 API 文档.",
    "title": "LskyPro-Go API",
    "termsOfService": "http://swagger.io/terms/",
    "contact": {
      "name": "API Support",
      "url": "http://www.swagger.io/support",
      "email": "support@swagger.io"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0"
  },
  "host": "localhost:8080",
  "basePath": "/api/v1",
  "paths": {
    "/admin/audit-logs": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员查询审计日志，支持筛选、分页和排序",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin - Audit"
        ],
        "summary": "查询审计日志",
        "parameters": [
          {
            "minimum": 1,
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "maximum": 100,
            "minimum": 1,
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          },
          {
            "minimum": 1,
            "type": "integer",
            "description": "操作员ID",
            "name": "operator_id",
            "in": "query"
          },
          {
            "type": "string",
            "description": "操作员名称 (模糊查询)",
            "name": "operator_name",
            "in": "query"
          },
          {
            "minimum": 1,
            "type": "integer",
            "description": "被操作用户ID",
            "name": "target_user_id",
            "in": "query"
          },
          {
            "type": "string",
            "description": "被操作用户名 (模糊查询)",
            "name": "target_username",
            "in": "query"
          },
          {
            "enum": [
              "USER_REGISTER",
              "USER_LOGIN",
              "USER_LOGOUT",
              "USER_UPDATE_PROFILE",
              "USER_CHANGE_PASSWORD",
              "USER_REQUEST_RESET_PWD",
              "USER_RESET_PASSWORD",
              "USER_VERIFY_EMAIL",
              "ADMIN_USER_CREATE",
              "ADMIN_USER_UPDATE",
              "ADMIN_USER_DELETE",
              "ADMIN_USER_STATUS_CHANGE",
              "ADMIN_USER_ROLE_CHANGE",
              "ADMIN_USER_PASSWORD_RESET",
              "ADMIN_BATCH_USER_APPROVE",
              "ADMIN_BATCH_USER_REJECT",
              "ADMIN_BATCH_USER_BAN",
              "ADMIN_BATCH_USER_UNBAN"
            ],
            "type": "string",
            "description": "操作类型 (精确匹配)",
            "name": "action_type",
            "in": "query"
          },
          {
            "type": "string",
            "format": "date-time",
            "description": "开始时间 (RFC3339, e.g., 2006-01-02T15:04:05Z07:00)",
            "name": "start_time",
            "in": "query"
          },
          {
            "type": "string",
            "format": "date-time",
            "description": "结束时间 (RFC3339, e.g., 2006-01-02T15:04:05Z07:00)",
            "name": "end_time",
            "in": "query"
          },
          {
            "enum": [
              "timestamp",
              "operator_name",
              "target_username",
              "action_type",
              "operator_id",
              "target_user_id",
              "status"
            ],
            "type": "string",
            "default": "timestamp",
            "description": "排序字段",
            "name": "sort_by",
            "in": "query"
          },
          {
            "enum": [
              "asc",
              "desc"
            ],
            "type": "string",
            "default": "desc",
            "description": "排序顺序",
            "name": "order",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.AuditLogQueryResponse"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "未经授权",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/storage-strategies": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员获取存储策略列表（分页）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Storage"
        ],
        "summary": "获取存储策略列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/models.StorageStrategy"
                      }
                    },
                    "meta": {
                      "$ref": "#/definitions/utils.PaginationMeta"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员创建新的存储策略",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Storage"
        ],
        "summary": "创建存储策略",
        "parameters": [
          {
            "description": "存储策略信息",
            "name": "strategy",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.StorageStrategy"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "创建成功",
            "schema": {
              "$ref": "#/definitions/models.StorageStrategy"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/storage-strategies/{id}": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员根据ID获取单个存储策略",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Storage"
        ],
        "summary": "获取单个存储策略",
        "parameters": [
          {
            "type": "integer",
            "description": "存储策略ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "$ref": "#/definitions/models.StorageStrategy"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "资源未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员更新指定的存储策略",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Storage"
        ],
        "summary": "更新存储策略",
        "parameters": [
          {
            "type": "integer",
            "description": "存储策略ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "存储策略信息",
            "name": "strategy",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.StorageStrategy"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "$ref": "#/definitions/models.StorageStrategy"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "资源未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员删除指定的存储策略",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Storage"
        ],
        "summary": "删除存储策略",
        "parameters": [
          {
            "type": "integer",
            "description": "存储策略ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "资源未找到或无法删除",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员获取用户列表的主要接口。支持通过用户名、邮箱、角色ID、状态、创建日期进行筛选，并支持排序。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "管理员获取用户列表（支持筛选和排序）",
        "parameters": [
          {
            "type": "string",
            "description": "用户名 (模糊匹配)",
            "name": "username",
            "in": "query"
          },
          {
            "type": "string",
            "description": "邮箱 (模糊匹配)",
            "name": "email",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "角色ID",
            "name": "role_id",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "用户状态 (0: Normal, 1: PendingApproval, 2: Banned, 3: Deleted, 4: ApprovalRejected)",
            "name": "status",
            "in": "query"
          },
          {
            "type": "string",
            "format": "date",
            "description": "创建时间范围开始 (YYYY-MM-DD)",
            "name": "created_at_start",
            "in": "query"
          },
          {
            "type": "string",
            "format": "date",
            "description": "创建时间范围结束 (YYYY-MM-DD)",
            "name": "created_at_end",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "default": "id",
            "description": "排序字段 (id, username, email, role_id, status, created_at, updated_at, last_login_at)",
            "name": "sort_by",
            "in": "query"
          },
          {
            "type": "string",
            "default": "asc",
            "description": "排序顺序 (asc, desc)",
            "name": "sort_order",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.PaginatedResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.AdminUserResponseDTO"
                      }
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员创建一个新用户账户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "管理员创建用户",
        "parameters": [
          {
            "description": "用户信息",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.AdminUserCreateRequest"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "用户创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或用户已存在",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/batch-approve": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员批量批准指定ID列表的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "批量批准用户",
        "parameters": [
          {
            "description": "用户ID列表",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.BatchUserIDsRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应，包含成功数量和失败详情",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/batch-ban": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员批量封禁指定ID列表的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "批量封禁用户",
        "parameters": [
          {
            "description": "用户ID列表",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.BatchUserIDsRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应，包含成功数量和失败详情",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/batch-reject": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员批量拒绝指定ID列表的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "批量拒绝用户",
        "parameters": [
          {
            "description": "用户ID列表和拒绝理由",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.BatchUserRejectRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应，包含成功数量和失败详情",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/batch-unban": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员批量解封指定ID列表的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "批量解封用户",
        "parameters": [
          {
            "description": "用户ID列表",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.BatchUserIDsRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应，包含成功数量和失败详情",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/pending": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员获取所有状态为“待审核”的用户列表，支持分页",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "获取待审核用户列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.PaginatedResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/models.User"
                      }
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}": {
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员更新指定用户的通用信息。此接口整合了原 UserController 中的用户更新功能，作为管理员修改用户资料的主要途径。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "管理员更新任意用户信息",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "用户信息",
            "name": "user",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.UserUpdateRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或无效的用户ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员物理删除指定ID的用户的主要接口。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "管理员物理删除用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "用户物理删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的用户ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}/approve": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员批准指定ID的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "批准用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或用户状态不合法",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}/ban": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员封禁指定ID的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "封禁用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "用户封禁成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效的用户ID或用户状态不合法",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}/reject": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员拒绝指定ID的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "拒绝用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "拒绝理由",
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/dtos.UserApprovalRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或用户状态不合法",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}/reset-password": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员为指定用户重置密码。新密码将通过邮件发送给用户。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "管理员重置用户密码",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的用户ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/admin/users/{id}/unban": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "管理员解封指定ID的用户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Admin User Management"
        ],
        "summary": "解封用户",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "用户解封成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.User"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效的用户ID或用户状态不合法",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/albums": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取当前登录用户的所有相册",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "获取当前用户的相册列表",
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.AlbumResponseDTO"
                      }
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "用户创建一个新的相册",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "创建相册",
        "parameters": [
          {
            "description": "相册信息",
            "name": "album_data",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/services.CreateAlbumInput"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "相册创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.AlbumResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/albums/{id}": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据相册ID获取相册的详细信息",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "获取单个相册信息",
        "parameters": [
          {
            "type": "integer",
            "description": "相册ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.AlbumResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效的相册ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "无权访问",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "相册未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新指定ID的相册信息",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "更新相册信息",
        "parameters": [
          {
            "type": "integer",
            "description": "相册ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "要更新的相册信息",
            "name": "album_data",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/services.UpdateAlbumInput"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.AlbumResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或无效的相册ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "无权修改",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "相册未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "删除指定ID的相册",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "删除相册",
        "parameters": [
          {
            "type": "integer",
            "description": "相册ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的相册ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "无权删除",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "相册未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/albums/{id}/images": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取指定相册下的所有图片，支持分页",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Albums"
        ],
        "summary": "获取相册下的图片列表",
        "parameters": [
          {
            "type": "integer",
            "description": "相册ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 20,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.ImageResponseDTO"
                      }
                    },
                    "meta": {
                      "$ref": "#/definitions/utils.PaginationMeta"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效的相册ID或分页参数",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "认证失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "无权访问",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "相册未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/auth/activate": {
      "post": {
        "description": "用户使用邮箱和激活码激活账户",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "账户激活",
        "parameters": [
          {
            "description": "激活信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.AccountActivationRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "账户激活成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误、验证码无效或已过期",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "description": "用户提交邮箱以请求密码重置邮件",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "请求密码重置",
        "parameters": [
          {
            "description": "忘记密码请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.ForgotPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置邮件已发送（如果用户存在且状态正常）",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在或状态异常",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "description": "用户使用用户名/邮箱和密码进行登录",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "用户登录",
        "parameters": [
          {
            "description": "登录信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/controllers.LoginRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "登录成功，返回用户信息和JWT",
            "schema": {
              "$ref": "#/definitions/dtos.LoginResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "401": {
            "description": "认证失败（用户不存在、密码错误或用户被禁用）",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "用户登出，使其 JWT 失效",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "用户登出",
        "responses": {
          "200": {
            "description": "登出成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求头中缺少 Authorization 或 Token 格式错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "description": "用户使用用户名、邮箱和密码进行注册",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "用户注册",
        "parameters": [
          {
            "description": "注册信息",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/controllers.RegisterRequest"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "注册请求已提交，请检查邮箱以激活账户",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误或用户已存在",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/resend-activation-email": {
      "post": {
        "description": "为待激活的用户重新发送激活邮件",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "重发激活邮件",
        "parameters": [
          {
            "description": "重发激活邮件请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.ResendActivationEmailRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "激活邮件已发送",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误或账户状态不适用",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "429": {
            "description": "操作过于频繁",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "description": "用户使用邮箱、新密码和验证码重置密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Auth"
        ],
        "summary": "执行密码重置",
        "parameters": [
          {
            "description": "重置密码请求",
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.ResetPasswordRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "密码重置成功",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "请求参数错误、验证码无效或已过期、密码不符合要求",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "404": {
            "description": "用户不存在或状态异常",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/images": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "列出当前用户的图片，支持分页和按相册筛选。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Images"
        ],
        "summary": "列出图片",
        "parameters": [
          {
            "type": "string",
            "description": "相册ID (用于筛选)",
            "name": "album_id",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "页码 (默认 1)",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "description": "每页数量 (默认 20)",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "图片列表及分页信息",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.ImageResponseDTO"
                      }
                    },
                    "meta": {
                      "$ref": "#/definitions/utils.PaginationMeta"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "上传一个或多个图片文件。用户必须已登录。",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Images"
        ],
        "summary": "上传图片",
        "parameters": [
          {
            "type": "file",
            "description": "要上传的图片文件 (字段名为 'files')",
            "name": "files",
            "in": "formData",
            "required": true
          },
          {
            "type": "string",
            "description": "图片关联的相册ID (可选)",
            "name": "album_id",
            "in": "formData"
          },
          {
            "type": "string",
            "description": "要使用的存储策略ID (可选, 否则使用默认策略)",
            "name": "storage_id",
            "in": "formData"
          }
        ],
        "responses": {
          "201": {
            "description": "图片上传成功，返回图片信息列表",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.UploadResponseDTO"
                      }
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "错误请求 (例如：未上传文件、文件过大、格式不支持)",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "401": {
            "description": "未授权 (用户未登录或Token无效)",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "/images/{id}": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据图片ID获取其元数据信息。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Images"
        ],
        "summary": "获取图片信息",
        "parameters": [
          {
            "type": "string",
            "description": "图片ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "图片元数据",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.ImageResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "404": {
            "description": "图片未找到",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据图片ID删除图片及其文件。需要图片所有者或管理员权限。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Images"
        ],
        "summary": "删除图片",
        "parameters": [
          {
            "type": "string",
            "description": "图片ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "401": {
            "description": "未授权",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "403": {
            "description": "无权限删除 (非所有者或管理员)",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "404": {
            "description": "图片未找到",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "/me": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取当前登录用户的详细信息",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Users"
        ],
        "summary": "获取当前用户信息",
        "responses": {
          "200": {
            "description": "成功响应",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.UserResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "type": "object"
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新当前登录用户的昵称、邮箱或密码",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Users"
        ],
        "summary": "更新当前用户信息",
        "parameters": [
          {
            "description": "更新信息",
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.UpdateMeDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功响应，返回更新后的用户信息",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.UserResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "type": "object"
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "type": "object"
            }
          },
          "409": {
            "description": "冲突错误 (例如邮箱已存在)",
            "schema": {
              "type": "object"
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "type": "object"
            }
          }
        }
      }
    },
    "/permissions": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取所有权限，支持分页和按组名过滤",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "获取权限列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          },
          {
            "type": "string",
            "description": "权限分组名称",
            "name": "group_name",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "创建一个新的权限定义",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "创建新权限",
        "parameters": [
          {
            "description": "权限创建信息",
            "name": "permission_input",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.PermissionCreateDTO"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "创建成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/permissions/{id}": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据ID获取权限的详细信息",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "获取单个权限详情",
        "parameters": [
          {
            "type": "integer",
            "description": "权限ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的ID格式",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "权限未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新指定ID的权限信息 (注意：通常不建议修改权限的 Name)",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "更新权限信息",
        "parameters": [
          {
            "type": "integer",
            "description": "权限ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "权限更新信息",
            "name": "permission_update",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.PermissionUpdateDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误或无效的ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "权限未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据ID删除权限及其所有关联",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "删除权限",
        "parameters": [
          {
            "type": "integer",
            "description": "权限ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的ID格式",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "权限未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/public/settings/site-details": {
      "get": {
        "description": "获取网站对所有访客公开的基础详情信息 (例如：应用名称, 网站描述, Favicon, Logo, 公告)",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings",
          "Public"
        ],
        "summary": "获取公开的网站基础详情",
        "responses": {
          "200": {
            "description": "成功获取公开的网站详情",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.PublicSiteDetailsDTO"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/roles": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取所有角色，支持分页",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "获取角色列表",
        "parameters": [
          {
            "type": "integer",
            "default": 1,
            "description": "页码",
            "name": "page",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 10,
            "description": "每页数量",
            "name": "page_size",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/dtos.RoleResponseDTO"
                      }
                    },
                    "meta": {
                      "$ref": "#/definitions/utils.PaginationMeta"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "创建一个新的角色",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "创建新角色",
        "parameters": [
          {
            "description": "角色创建信息",
            "name": "role_input",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.RoleCreateDTO"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.RoleResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/roles/{id}": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据ID获取角色的详细信息，包括其权限",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "获取单个角色详情",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.RoleResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效的ID格式",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新指定ID的角色名称",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "更新角色信息",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "角色更新信息",
            "name": "role_update",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.RoleUpdateDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.RoleResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或无效的ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据ID删除角色及其所有关联的权限和用户分配",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "删除角色",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效的ID格式",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/roles/{id}/permissions": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取指定角色当前拥有的所有权限",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "获取角色拥有的权限列表",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "覆盖指定角色当前的所有权限为请求中提供的权限列表",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "同步角色的权限列表",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "description": "权限ID列表",
            "name": "permission_sync_input",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.SyncPermissionsDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "同步成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误或无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/roles/{id}/permissions/{permission_id}": {
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "从指定的角色移除指定的权限",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "从角色移除权限",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "type": "integer",
            "description": "权限ID",
            "name": "permission_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "移除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/roles/{role_id}/permissions": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "将指定的权限分配给指定的角色",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Permissions"
        ],
        "summary": "为角色添加权限",
        "parameters": [
          {
            "type": "integer",
            "description": "角色ID",
            "name": "role_id",
            "in": "path",
            "required": true
          },
          {
            "description": "权限分配信息",
            "name": "permission_assign_input",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.AssignPermissionDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "分配成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误或无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "角色或权限未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/settings/basic": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取网站的详细基础配置信息 (仅供管理员访问)。包含SMTP设置（SMTP密码本身不会返回，但会指示是否已设置）。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "获取网站基础配置",
        "responses": {
          "200": {
            "description": "成功获取网站详细基础配置",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.AdminBasicSiteSettingsDTO"
                    }
                  }
                }
              ]
            }
          },
          "401": {
            "description": "用户未认证",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "用户无权限访问",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新网站的基础配置信息。所有字段都是可选的，只更新提供的字段。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "更新网站基础配置",
        "parameters": [
          {
            "description": "要更新的网站基础配置项",
            "name": "settings",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.BasicSiteSetting"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "网站基础配置更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.BasicSiteSetting"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或校验失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/settings/email": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取系统的邮件服务器配置信息 (SMTP服务器, 端口, 用户名, 发件人邮箱, 发件人名称, 邮件通知开关)。不包含敏感信息如密码。",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "获取邮件配置",
        "responses": {
          "200": {
            "description": "成功获取邮件配置",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.BasicSitePublicSettingsDTO"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新系统的邮件服务器配置信息。所有字段都是可选的。成功后返回更新后的公开邮件配置。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "更新邮件配置",
        "parameters": [
          {
            "description": "要更新的邮件配置项",
            "name": "settings",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.UpdateEmailSettingsDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "邮件配置更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.BasicSitePublicSettingsDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或校验失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/settings/image-processing": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取系统的图片处理配置信息 (例如：图片自动压缩, 压缩质量, 水印设置, 上传大小限制, 允许格式, 缩略图等)",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "获取图片处理配置",
        "responses": {
          "200": {
            "description": "成功获取图片处理配置",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.ImageProcessingSetting"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新系统的图片处理配置信息。所有字段都是可选的，只更新提供的字段。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "更新图片处理配置",
        "parameters": [
          {
            "description": "要更新的图片处理配置项",
            "name": "settings",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.ImageProcessingSetting"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "图片处理配置更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.ImageProcessingSetting"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或校验失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/settings/security": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取系统的安全配置信息 (例如：登录尝试次数限制, 账户锁定策略, IP黑白名单, 密码策略等)",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "获取安全配置",
        "responses": {
          "200": {
            "description": "成功获取安全配置",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.SecuritySetting"
                    }
                  }
                }
              ]
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "更新系统的安全配置信息。所有字段都是可选的，只更新提供的字段。",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Settings"
        ],
        "summary": "更新安全配置",
        "parameters": [
          {
            "description": "要更新的安全配置项",
            "name": "settings",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/models.SecuritySetting"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "安全配置更新成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/models.SecuritySetting"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误或校验失败",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/shares": {
      "post": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "为图片或相册创建分享链接",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Share"
        ],
        "summary": "创建分享链接",
        "parameters": [
          {
            "description": "分享请求参数",
            "name": "share",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/controllers.CreateShareLinkRequest"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "分享链接创建成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/services.ShareResponse"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "请求参数错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "未经授权",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "禁止访问（例如，资源不属于当前用户）",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "资源未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/shares/{token}": {
      "get": {
        "description": "通过分享 Token 访问图片或相册内容（无需认证）",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Share"
        ],
        "summary": "获取分享内容",
        "parameters": [
          {
            "type": "string",
            "description": "分享Token",
            "name": "token",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取分享内容成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object"
                    }
                  }
                }
              ]
            }
          },
          "404": {
            "description": "分享链接不存在或已过期",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "根据 Token 删除一个分享链接",
        "produces": [
          "application/json"
        ],
        "tags": [
          "Share"
        ],
        "summary": "删除分享链接",
        "parameters": [
          {
            "type": "string",
            "description": "分享Token",
            "name": "token",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "分享链接删除成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "Token 不能为空",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "401": {
            "description": "未经授权",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "403": {
            "description": "禁止访问（例如，不是分享的创建者）",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "分享链接未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/users/{id}/roles": {
      "get": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "获取指定用户的当前角色",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "获取用户的角色",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/utils.SuccessResponse"
                },
                {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/definitions/dtos.RoleResponseDTO"
                    }
                  }
                }
              ]
            }
          },
          "400": {
            "description": "无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户或其角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    },
    "/users/{user_id}/roles": {
      "put": {
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "description": "将指定用户分配给指定的角色 (目前系统为单角色模型)",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "Roles"
        ],
        "summary": "为用户分配角色",
        "parameters": [
          {
            "type": "integer",
            "description": "用户ID",
            "name": "user_id",
            "in": "path",
            "required": true
          },
          {
            "description": "角色分配信息",
            "name": "role_assign_input",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/dtos.AssignRoleDTO"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "分配成功",
            "schema": {
              "$ref": "#/definitions/utils.SuccessResponse"
            }
          },
          "400": {
            "description": "请求参数错误或无效ID",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "404": {
            "description": "用户或角色未找到",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          },
          "500": {
            "description": "服务器内部错误",
            "schema": {
              "$ref": "#/definitions/utils.ErrorResponse"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "controllers.CreateShareLinkRequest": {
      "type": "object",
      "required": [
        "resource_id",
        "type"
      ],
      "properties": {
        "expire_days": {
          "description": "可选，分享有效天数",
          "type": "integer"
        },
        "resource_id": {
          "type": "integer"
        },
        "type": {
          "description": "\"image\" 或 \"album\"",
          "type": "string",
          "enum": [
            "image",
            "album"
          ]
        }
      }
    },
    "controllers.LoginRequest": {
      "type": "object",
      "required": [
        "password",
        "username_or_email"
      ],
      "properties": {
        "password": {
          "type": "string"
        },
        "username_or_email": {
          "type": "string"
        }
      }
    },
    "controllers.RegisterRequest": {
      "type": "object",
      "required": [
        "email",
        "password",
        "username"
      ],
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string",
          "maxLength": 100,
          "minLength": 6
        },
        "username": {
          "type": "string",
          "maxLength": 50,
          "minLength": 3
        }
      }
    },
    "dtos.AccountActivationRequest": {
      "type": "object",
      "required": [
        "code",
        "email"
      ],
      "properties": {
        "code": {
          "description": "8位激活码",
          "type": "string",
          "minLength": 8,
          "example": "12345678"
        },
        "email": {
          "description": "邮箱",
          "type": "string",
          "example": "user@example.com"
        }
      }
    },
    "dtos.AdminBasicSiteSettingsDTO": {
      "type": "object",
      "properties": {
        "admin_approval_required": {
          "type": "boolean"
        },
        "app_name": {
          "type": "string"
        },
        "created_at": {
          "type": "string"
        },
        "email_notify_enabled": {
          "type": "boolean"
        },
        "email_verification_required": {
          "type": "boolean"
        },
        "favicon_url": {
          "type": "string"
        },
        "from_email_address": {
          "type": "string"
        },
        "from_email_name": {
          "type": "string"
        },
        "guest_upload_enabled": {
          "type": "boolean"
        },
        "id": {
          "type": "integer"
        },
        "is_smtp_password_set": {
          "description": "指示SMTP密码是否已设置",
          "type": "boolean"
        },
        "logo_url": {
          "type": "string"
        },
        "seo_keywords": {
          "type": "string"
        },
        "site_announcement": {
          "type": "string"
        },
        "site_description": {
          "type": "string"
        },
        "smtp_port": {
          "type": "integer"
        },
        "smtp_server": {
          "type": "string"
        },
        "smtp_username": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        },
        "user_initial_storage_capacity_mb": {
          "type": "integer"
        },
        "user_registration_enabled": {
          "type": "boolean"
        }
      }
    },
    "dtos.AdminUserCreateRequest": {
      "type": "object",
      "required": [
        "email",
        "password",
        "role_id",
        "username"
      ],
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string",
          "maxLength": 100,
          "minLength": 8
        },
        "role_id": {
          "type": "integer"
        },
        "username": {
          "type": "string",
          "maxLength": 50,
          "minLength": 3
        }
      }
    },
    "dtos.AdminUserResponseDTO": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "last_login_at": {
          "description": "omitempty 如果为 nil 则不显示",
          "type": "string"
        },
        "last_login_ip": {
          "description": "omitempty 如果为空字符串则不显示",
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "original_role_id": {
          "description": "omitempty 如果为0则不显示",
          "type": "integer"
        },
        "role": {
          "description": "使用 RoleResponseDTO",
          "allOf": [
            {
              "$ref": "#/definitions/dtos.RoleResponseDTO"
            }
          ]
        },
        "status": {
          "type": "integer"
        },
        "updated_at": {
          "type": "string"
        },
        "username": {
          "type": "string"
        }
      }
    },
    "dtos.AlbumResponseDTO": {
      "type": "object",
      "properties": {
        "cover_image_id": {
          "type": "integer"
        },
        "created_at": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "is_public": {
          "type": "boolean"
        },
        "name": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        }
      }
    },
    "dtos.AssignPermissionDTO": {
      "type": "object",
      "required": [
        "permission_id"
      ],
      "properties": {
        "permission_id": {
          "description": "要分配的权限ID",
          "type": "integer",
          "example": 101
        }
      }
    },
    "dtos.AssignRoleDTO": {
      "type": "object",
      "required": [
        "role_id"
      ],
      "properties": {
        "role_id": {
          "description": "要分配的角色ID",
          "type": "integer",
          "example": 1
        }
      }
    },
    "dtos.AuditLogQueryResponse": {
      "type": "object",
      "properties": {
        "logs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/dtos.AuditLogResponseItem"
          }
        },
        "meta": {
          "$ref": "#/definitions/utils.PaginationMeta"
        }
      }
    },
    "dtos.AuditLogResponseItem": {
      "type": "object",
      "properties": {
        "action_type": {
          "$ref": "#/definitions/models.AuditLogActionType"
        },
        "description": {
          "type": "string"
        },
        "details": {
          "description": "使用 interface{} 以便灵活处理 JSON 数据"
        },
        "failure_reason": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "operator_id": {
          "type": "integer"
        },
        "operator_ip": {
          "type": "string"
        },
        "operator_name": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "target_user_id": {
          "type": "integer"
        },
        "target_username": {
          "type": "string"
        },
        "timestamp": {
          "type": "string"
        },
        "user_agent": {
          "type": "string"
        }
      }
    },
    "dtos.BasicSitePublicSettingsDTO": {
      "type": "object",
      "properties": {
        "email_notify_enabled_public": {
          "type": "boolean"
        },
        "from_email_address_public": {
          "type": "string"
        },
        "from_email_name_public": {
          "type": "string"
        },
        "smtp_port_public": {
          "type": "integer"
        },
        "smtp_server_public": {
          "type": "string"
        },
        "smtp_username_public": {
          "type": "string"
        }
      }
    },
    "dtos.BatchUserIDsRequest": {
      "type": "object",
      "required": [
        "user_ids"
      ],
      "properties": {
        "user_ids": {
          "description": "用户ID列表，必需且至少包含一个ID",
          "type": "array",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "dtos.BatchUserRejectRequest": {
      "type": "object",
      "required": [
        "user_ids"
      ],
      "properties": {
        "reason": {
          "description": "拒绝理由，可选",
          "type": "string"
        },
        "user_ids": {
          "description": "用户ID列表，必需且至少包含一个ID",
          "type": "array",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "dtos.ForgotPasswordRequest": {
      "type": "object",
      "required": [
        "email"
      ],
      "properties": {
        "email": {
          "type": "string"
        }
      }
    },
    "dtos.ImageResponseDTO": {
      "type": "object",
      "properties": {
        "album_id": {
          "type": "integer"
        },
        "created_at": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "height": {
          "type": "integer"
        },
        "id": {
          "type": "integer"
        },
        "is_public": {
          "type": "boolean"
        },
        "mime_type": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "status": {
          "type": "integer"
        },
        "storage_strategy_id": {
          "type": "integer"
        },
        "updated_at": {
          "type": "string"
        },
        "url": {
          "type": "string"
        },
        "user_id": {
          "type": "integer"
        },
        "width": {
          "type": "integer"
        }
      }
    },
    "dtos.LoginResponse": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/dtos.LoginResponseData"
        },
        "message": {
          "type": "string",
          "example": "登录成功"
        }
      }
    },
    "dtos.LoginResponseData": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string",
          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        },
        "user": {
          "$ref": "#/definitions/dtos.LoginResponseUser"
        }
      }
    },
    "dtos.LoginResponseUser": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "example": "user@example.com"
        },
        "id": {
          "type": "integer",
          "example": 1
        },
        "role": {
          "type": "string",
          "example": "user"
        },
        "username": {
          "type": "string",
          "example": "testuser"
        }
      }
    },
    "dtos.PermissionCreateDTO": {
      "type": "object",
      "required": [
        "group_name",
        "name"
      ],
      "properties": {
        "description": {
          "description": "权限的详细描述",
          "type": "string",
          "example": "允许创建新用户"
        },
        "group_name": {
          "description": "权限所属的分组名称，便于管理和展示",
          "type": "string",
          "example": "User Management"
        },
        "name": {
          "description": "权限名称，通常是唯一的动作标识符",
          "type": "string",
          "example": "create_user"
        }
      }
    },
    "dtos.PermissionResponseDTO": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "group_name": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        },
        "updated_at": {
          "type": "string"
        }
      }
    },
    "dtos.PermissionUpdateDTO": {
      "type": "object",
      "properties": {
        "description": {
          "description": "权限的详细描述 (可选)",
          "type": "string",
          "example": "更新后的权限描述"
        },
        "group_name": {
          "description": "权限所属的分组名称 (可选)",
          "type": "string",
          "example": "Admin Group"
        }
      }
    },
    "dtos.PublicSiteDetailsDTO": {
      "type": "object",
      "properties": {
        "app_name": {
          "type": "string"
        },
        "favicon_url": {
          "type": "string"
        },
        "logo_url": {
          "type": "string"
        },
        "site_announcement": {
          "type": "string"
        },
        "site_description": {
          "type": "string"
        }
      }
    },
    "dtos.ResendActivationEmailRequest": {
      "type": "object",
      "required": [
        "email"
      ],
      "properties": {
        "email": {
          "type": "string",
          "example": "user@example.com"
        }
      }
    },
    "dtos.ResetPasswordRequest": {
      "type": "object",
      "required": [
        "code",
        "confirm_password",
        "email",
        "password"
      ],
      "properties": {
        "code": {
          "description": "8位重置码",
          "type": "string",
          "minLength": 8,
          "example": "87654321"
        },
        "confirm_password": {
          "description": "确认密码 (必须与新密码相同)",
          "type": "string",
          "example": "newpassword123"
        },
        "email": {
          "type": "string",
          "example": "user@example.com"
        },
        "password": {
          "description": "新密码 (最小长度6)",
          "type": "string",
          "minLength": 6,
          "example": "newpassword123"
        }
      }
    },
    "dtos.RoleCreateDTO": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "alias": {
          "description": "角色别名，可选",
          "type": "string",
          "example": "管理员"
        },
        "name": {
          "description": "角色名称，必须唯一",
          "type": "string",
          "example": "administrator"
        }
      }
    },
    "dtos.RoleResponseDTO": {
      "type": "object",
      "properties": {
        "alias": {
          "type": "string"
        },
        "created_at": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        },
        "permissions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/dtos.PermissionResponseDTO"
          }
        },
        "updated_at": {
          "type": "string"
        }
      }
    },
    "dtos.RoleUpdateDTO": {
      "type": "object",
      "properties": {
        "alias": {
          "description": "新的角色别名",
          "type": "string",
          "example": "超级管理员"
        },
        "name": {
          "description": "新的角色名称",
          "type": "string",
          "example": "super_admin"
        }
      }
    },
    "dtos.SyncPermissionsDTO": {
      "type": "object",
      "properties": {
        "permission_ids": {
          "description": "权限ID列表，将覆盖角色当前所有权限",
          "type": "array",
          "items": {
            "type": "integer"
          },
          "example": [
            101,
            102,
            103
          ]
        }
      }
    },
    "dtos.UpdateEmailSettingsDTO": {
      "type": "object",
      "properties": {
        "email_notify_enabled": {
          "description": "使用指针以区分未提供和提供false的情况",
          "type": "boolean"
        },
        "from_email_address": {
          "type": "string"
        },
        "from_email_name": {
          "type": "string"
        },
        "smtp_password": {
          "description": "注意：密码应由后端加密处理",
          "type": "string"
        },
        "smtp_port": {
          "description": "使用指针以支持清空或设为0",
          "type": "integer"
        },
        "smtp_server": {
          "type": "string"
        },
        "smtp_username": {
          "type": "string"
        }
      }
    },
    "dtos.UpdateMeDTO": {
      "type": "object",
      "properties": {
        "email": {
          "description": "邮箱 (可选, 如果提供则校验格式)",
          "type": "string",
          "format": "email",
          "example": "new.email@example.com"
        },
        "nickname": {
          "description": "昵称 (可选)",
          "type": "string",
          "example": "NewNickname"
        },
        "password": {
          "description": "新密码 (可选, 如果提供则至少6位)",
          "type": "string",
          "minLength": 6,
          "example": "newpassword123"
        }
      }
    },
    "dtos.UploadResponseDTO": {
      "type": "object",
      "properties": {
        "filename": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "mime_type": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "url": {
          "type": "string"
        }
      }
    },
    "dtos.UserApprovalRequest": {
      "type": "object",
      "properties": {
        "reason": {
          "description": "拒绝理由，可选",
          "type": "string"
        }
      }
    },
    "dtos.UserResponseDTO": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "last_login_at": {
          "type": "string"
        },
        "last_login_ip": {
          "type": "string"
        },
        "nickname": {
          "type": "string"
        },
        "role": {
          "description": "替换 RoleID",
          "allOf": [
            {
              "$ref": "#/definitions/dtos.RoleResponseDTO"
            }
          ]
        },
        "status": {
          "type": "integer"
        },
        "updated_at": {
          "type": "string"
        },
        "username": {
          "type": "string"
        }
      }
    },
    "models.AuditLogActionType": {
      "type": "string",
      "enum": [
        "USER_REGISTER",
        "USER_LOGIN",
        "USER_LOGOUT",
        "USER_UPDATE_PROFILE",
        "USER_CHANGE_PASSWORD",
        "USER_REQUEST_RESET_PWD",
        "USER_RESET_PASSWORD",
        "USER_VERIFY_EMAIL",
        "USER_REQUEST_ACTIVATION_EMAIL",
        "USER_REQUEST_RESET_PWD_EMAIL",
        "ADMIN_USER_CREATE",
        "ADMIN_USER_UPDATE",
        "ADMIN_USER_DELETE",
        "ADMIN_USER_STATUS_CHANGE",
        "ADMIN_USER_ROLE_CHANGE",
        "ADMIN_USER_PASSWORD_RESET",
        "ADMIN_BATCH_USER_APPROVE",
        "ADMIN_BATCH_USER_REJECT",
        "ADMIN_BATCH_USER_BAN",
        "ADMIN_BATCH_USER_UNBAN",
        "SYSTEM_EMAIL_SEND_SKIPPED"
      ],
      "x-enum-comments": {
        "ActionSystemEmailSendSkipped": "邮件发送因配置或开关被跳过"
      },
      "x-enum-varnames": [
        "ActionUserRegister",
        "ActionUserLogin",
        "ActionUserLogout",
        "ActionUserUpdateProfile",
        "ActionUserChangePassword",
        "ActionUserRequestResetPwd",
        "ActionUserResetPassword",
        "ActionUserVerifyEmail",
        "ActionUserRequestActivationEmail",
        "ActionUserRequestResetPwdEmail",
        "ActionAdminUserCreate",
        "ActionAdminUserUpdate",
        "ActionAdminUserDelete",
        "ActionAdminUserStatusChange",
        "ActionAdminUserRoleChange",
        "ActionAdminUserPasswordReset",
        "ActionAdminBatchUserApprove",
        "ActionAdminBatchUserReject",
        "ActionAdminBatchUserBan",
        "ActionAdminBatchUserUnban",
        "ActionSystemEmailSendSkipped"
      ]
    },
    "models.BasicSiteSetting": {
      "type": "object",
      "properties": {
        "adminApprovalRequired": {
          "type": "boolean"
        },
        "appName": {
          "type": "string"
        },
        "createdAt": {
          "type": "string"
        },
        "emailNotifyEnabled": {
          "type": "boolean"
        },
        "emailVerificationRequired": {
          "type": "boolean"
        },
        "faviconURL": {
          "type": "string"
        },
        "fromEmailAddress": {
          "type": "string"
        },
        "fromEmailName": {
          "type": "string"
        },
        "guestUploadEnabled": {
          "type": "boolean"
        },
        "id": {
          "type": "integer"
        },
        "logoURL": {
          "type": "string"
        },
        "seoKeywords": {
          "type": "string"
        },
        "siteAnnouncement": {
          "type": "string"
        },
        "siteDescription": {
          "type": "string"
        },
        "smtppassword": {
          "type": "string"
        },
        "smtpport": {
          "type": "integer"
        },
        "smtpserver": {
          "type": "string"
        },
        "smtpusername": {
          "type": "string"
        },
        "updatedAt": {
          "type": "string"
        },
        "userInitialStorageCapacityMB": {
          "description": "校验: e.g., 10-102400",
          "type": "integer"
        },
        "userRegistrationEnabled": {
          "type": "boolean"
        }
      }
    },
    "models.ImageProcessingSetting": {
      "type": "object",
      "properties": {
        "allowedImageFormats": {
          "type": "string"
        },
        "autoCompressEnabled": {
          "type": "boolean"
        },
        "batchUploadLimit": {
          "description": "校验: e.g., 1-100",
          "type": "integer"
        },
        "compressionQuality": {
          "description": "校验: 1-100",
          "type": "integer"
        },
        "createdAt": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "thumbnailEnabled": {
          "type": "boolean"
        },
        "thumbnailHeight": {
          "description": "校验: e.g., 0-8000",
          "type": "integer"
        },
        "thumbnailWidth": {
          "description": "校验: e.g., 0-8000",
          "type": "integer"
        },
        "updatedAt": {
          "type": "string"
        },
        "uploadMaxSizeMB": {
          "description": "校验: e.g., 1-100",
          "type": "integer"
        },
        "watermarkEnabled": {
          "type": "boolean"
        },
        "watermarkMarginX": {
          "type": "integer"
        },
        "watermarkMarginY": {
          "type": "integer"
        },
        "watermarkOpacity": {
          "description": "校验: 0.0-1.0",
          "type": "number"
        },
        "watermarkPosition": {
          "type": "string"
        },
        "watermarkScaleRatio": {
          "description": "校验: e.g., 0.01-1.0",
          "type": "number"
        },
        "watermarkSourceFile": {
          "type": "string"
        }
      }
    },
    "models.Permission": {
      "type": "object",
      "properties": {
        "createdAt": {
          "type": "string"
        },
        "description": {
          "description": "权限描述",
          "type": "string"
        },
        "groupName": {
          "description": "权限分组, e.g., \"用户管理\", \"图片管理\"",
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "description": "权限名称, 如 user:create",
          "type": "string"
        },
        "updatedAt": {
          "type": "string"
        }
      }
    },
    "models.Role": {
      "type": "object",
      "properties": {
        "alias": {
          "description": "别名",
          "type": "string"
        },
        "createdAt": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "name": {
          "description": "角色名称",
          "type": "string"
        },
        "permissions": {
          "description": "角色拥有的权限",
          "type": "array",
          "items": {
            "$ref": "#/definitions/models.Permission"
          }
        },
        "updatedAt": {
          "type": "string"
        }
      }
    },
    "models.SecuritySetting": {
      "type": "object",
      "properties": {
        "accountLockoutDurationMinutes": {
          "description": "校验: e.g., 5-1440",
          "type": "integer"
        },
        "createdAt": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "ipblacklist": {
          "type": "string"
        },
        "ipwhitelist": {
          "type": "string"
        },
        "loginMaxAttempts": {
          "description": "校验: e.g., 3-20",
          "type": "integer"
        },
        "passwordMinLength": {
          "description": "校验: e.g., 6-64",
          "type": "integer"
        },
        "passwordRequiresLowercase": {
          "type": "boolean"
        },
        "passwordRequiresNumber": {
          "type": "boolean"
        },
        "passwordRequiresSpecialChar": {
          "type": "boolean"
        },
        "passwordRequiresUppercase": {
          "type": "boolean"
        },
        "updatedAt": {
          "type": "string"
        }
      }
    },
    "models.StorageStrategy": {
      "type": "object",
      "properties": {
        "config": {
          "description": "存储配置详情 (JSON)",
          "type": "string"
        },
        "createdAt": {
          "description": "创建时间",
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "isEnabled": {
          "description": "是否启用",
          "type": "boolean"
        },
        "name": {
          "description": "策略名称",
          "type": "string"
        },
        "type": {
          "description": "存储类型标识",
          "type": "string"
        },
        "updatedAt": {
          "description": "更新时间",
          "type": "string"
        }
      }
    },
    "models.User": {
      "type": "object",
      "properties": {
        "createdAt": {
          "description": "注册时间",
          "type": "string"
        },
        "email": {
          "description": "用户邮箱",
          "type": "string"
        },
        "id": {
          "type": "integer"
        },
        "lastLoginAt": {
          "description": "最后登录时间",
          "type": "string"
        },
        "lastLoginIP": {
          "description": "最后登录IP",
          "type": "string"
        },
        "minTokenIssueTime": {
          "description": "新增字段",
          "type": "string"
        },
        "nickname": {
          "description": "用户昵称 (可选)",
          "type": "string"
        },
        "originalRoleID": {
          "type": "integer"
        },
        "passwordHash": {
          "description": "密码哈希",
          "type": "string"
        },
        "role": {
          "description": "关联角色",
          "allOf": [
            {
              "$ref": "#/definitions/models.Role"
            }
          ]
        },
        "roleID": {
          "description": "用户角色ID",
          "type": "integer"
        },
        "status": {
          "description": "用户状态（0-正常, 1-禁用, 2-待审核, 3-已删除, 4-审核拒绝）",
          "type": "integer"
        },
        "suspiciousLoginNotifiedAt": {
          "description": "新增字段",
          "type": "string"
        },
        "updatedAt": {
          "description": "更新时间",
          "type": "string"
        },
        "username": {
          "description": "用户名/登录名",
          "type": "string"
        }
      }
    },
    "models.UserUpdateRequest": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "description": "可选，用于修改密码",
          "type": "string"
        },
        "role_id": {
          "description": "可选，用于修改角色",
          "type": "integer"
        },
        "status": {
          "description": "可选，用于修改状态",
          "type": "integer"
        },
        "username": {
          "type": "string"
        }
      }
    },
    "services.CreateAlbumInput": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "cover_image_id": {
          "type": "integer"
        },
        "description": {
          "type": "string",
          "maxLength": 1024
        },
        "is_public": {
          "type": "boolean"
        },
        "name": {
          "type": "string",
          "maxLength": 255,
          "minLength": 1
        }
      }
    },
    "services.ShareResponse": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string"
        },
        "expire_at": {
          "type": "string"
        },
        "resource_id": {
          "type": "integer"
        },
        "token": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "url": {
          "description": "完整的分享 URL",
          "type": "string"
        }
      }
    },
    "services.UpdateAlbumInput": {
      "type": "object",
      "properties": {
        "cover_image_id": {
          "description": "允许设为 null",
          "type": "integer"
        },
        "description": {
          "type": "string",
          "maxLength": 1024
        },
        "is_public": {
          "type": "boolean"
        },
        "name": {
          "type": "string",
          "maxLength": 255,
          "minLength": 1
        }
      }
    },
    "utils.ErrorResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer"
        },
        "error": {
          "description": "更详细的错误信息，可选",
          "type": "string"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "utils.PaginatedResponse": {
      "type": "object",
      "properties": {
        "code": {
          "description": "HTTP 状态码或业务状态码",
          "type": "integer"
        },
        "data": {
          "description": "实际数据列表"
        },
        "message": {
          "description": "响应消息",
          "type": "string"
        },
        "meta": {
          "description": "分页元数据",
          "allOf": [
            {
              "$ref": "#/definitions/utils.PaginationMeta"
            }
          ]
        }
      }
    },
    "utils.PaginationMeta": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer"
        },
        "page_size": {
          "type": "integer"
        },
        "total": {
          "type": "integer"
        }
      }
    },
    "utils.SuccessResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer"
        },
        "data": {},
        "message": {
          "type": "string"
        },
        "meta": {
          "description": "用于分页等元数据"
        }
      }
    }
  },
  "securityDefinitions": {
    "ApiKeyAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  }
}